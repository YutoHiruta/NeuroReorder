# 概要
ルールリストで表したパケット分類子を、強化学習によって最適化する。

# 仕様
## 使用しているライブラリ
- Gym
- Keras-RL
- Ray (RLlibは未使用)(まだ未実装)

## 開発時のバージョン
### 基礎
- Python 3.6.8
- pip 21.2.2
### ライブラリ
- tensorflow-cpu 2.5.0
- tensorboard 2.5.0
- Keras 2.4.3
- keras-rl2 1.0.5
- gym 0.18.3
- numpy 1.19.5
- matplotlib 3.3.4

概ねこのあたりを入れておけば動くと思います。

# 現在の実装における実行方法
`main.py`を実行する。第1引数にルールリストを、`--packets`に、報酬計算に使うパケットリストを指定する。  
`--packets`を/指定しない場合、パケットリストは一様分布と仮定し、全てのパケットを一つずつ持つリストを作り、報酬計算に用いる。ゆえにリストの長さが2^xになるので、classbenchで生成したルールに対してはbit長が大きすぎて無指定は不可能。
## コマンド例
	python3 main.py RuleList/assigned_Rule_acl5_500 --packets=PacketList/Packet_acl5_500

以下のような表示が出ればエラーなく学習が開始されている。  
`4547/10000 [============>.................] - ETA: 46s - reward: -3.7585`  
学習が終了したら、ステップ数と報酬のグラフがそれぞれ表示される。

# バージョンメモ

# ver1.1
### 環境
アクション (act,src,dst)  
0 MOVE(強制的に1にする)  
1 MOVE  
  
src 移動元のルール番号(全番号を選択可)  
dst 移動先のルール番号(後述)  
  
移動先は、srcから上下に、順番に以下の2つの条件を確認し、このどちらかを満たさないルールが発見されるまでの範囲を移動範囲とする。
- 従属関係にない
- 移動すると重みが大きいルールが上に来るような関係
つまり、重みの大きいルールが上に行くような選択肢だけを提示する。

## ver1.0
### 環境
アクション (act,src,dst)  
0 DONE  
1 MOVE  
  
src 移動元のルール番号(全番号を選択可)  
dst 移動先のルール番号(全番号を選択可)